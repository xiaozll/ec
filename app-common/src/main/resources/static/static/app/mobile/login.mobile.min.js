$.afui.useOSThemes=false;var $loginName;var $password;var $rememberMe;var needEncrypt=needEncrypt;var SALT;var securityToken;$(function(){$loginName=$("#loginName");$password=$("#password");$rememberMe=$("#rememberMe");$rememberMe.prop("checked",window.localStorage.getItem("rememberMe")!=="");$loginName.val(window.localStorage.getItem("loginName"));if(window.localStorage.getItem("rememberMe")){$password.val(window.localStorage.getItem("password"))}else{$loginName.focus()}$password.change(function(){needEncrypt=true});$rememberMe.click(function(){var b=$(this).prop("checked");var a=$password.val();if(needEncrypt){a=md5(md5(a+SALT)+securityToken)}if(b){window.localStorage.setItem("loginName",$loginName.val());window.localStorage.setItem("password",a);window.localStorage.setItem("rememberMe",b)}else{window.localStorage.setItem("password","");window.localStorage.setItem("rememberMe","")}})});function login(){if(!$loginName.val()){$.afui.toast({message:"账号不能为空!",position:"tc",autoClose:true,type:"success"});return}var a=$password.val();if(!a){$.afui.toast({message:"密码不能为空!",position:"tc",autoClose:true,type:"success"});return}if(needEncrypt){a=md5(md5(a+SALT)+securityToken)}$.ajax({url:ctxAdmin+"/login/login",type:"post",data:{loginName:$loginName.val(),password:a,checkDevice:false},traditional:true,async:false,dataType:"json",success:function(b){if(b.code===1){if(b.obj){setTimeout(function(){window.location=b.obj["homeUrl"]},1000)}else{setTimeout(function(){window.location=ctxMobile},1000)}}else{$.afui.toast({message:b.msg,position:"tc",autoClose:true,type:"warning"})}}})};