var modelId;var $resource_user_datagrid;$(function(){$resource_user_datagrid=$("#resource_user_datagrid").datagrid({url:ctxAdmin+"/sys/resource/resourceUserDatagrid/"+modelId,fit:true,pagination:true,rownumbers:true,fitColumns:false,striped:true,pageSize:20,pageList:[10,20,50,100,1000,99999],remoteSort:false,idField:"id",frozen:true,collapsible:true,frozenColumns:[[{field:"ck",checkbox:true},{field:"loginName",title:"登录名",width:120,sortable:true},{field:"name",title:"姓名",width:100,sortable:true}]],columns:[[{field:"code",title:"员工编号",width:80,hidden:true,sortable:true},{field:"id",title:"主键",hidden:true,sortable:true,align:"right",width:80},{field:"tel",title:"办公电话",width:100},{field:"mobile",title:"手机号",width:100},{field:"qq",title:"QQ",width:100},{field:"email",title:"公司邮箱",width:160},{field:"personEmail",title:"个人邮箱",width:160},{field:"defaultOrganId",title:"默认机构ID",width:80,hidden:true},{field:"defaultOrganName",title:"部门",width:160,sortable:true},{field:"companyName",title:"单位",width:200,sortable:true,hidden:true},{field:"sexView",title:"性别",width:60,align:"center",sortable:true},{field:"birthday",title:"出生日期",width:80,sortable:true},{field:"address",title:"地址",width:200},{field:"remark",title:"备注",width:200},{field:"sort",title:"排序",width:60,sortable:true},{field:"statusView",title:"状态",align:"center",width:60,formatter:function(b,a,c){if(a.status!==0){return $.formatString('<span  style="color:red">{0}</span>',b)}return b}}]],toolbar:[{text:"删除关联",iconCls:"easyui-icon-remove",handler:function(){deleteUsers()}},],onLoadSuccess:function(){$(this).datagrid("clearSelections");$(this).datagrid("unselectAll")},onRowContextMenu:function(b,c,a){b.preventDefault()}}).datagrid("showTooltip")});function deleteUsers(){var a=$resource_user_datagrid.datagrid("getSelections");if(a.length>0){$.messager.confirm("确认提示！","您确定要删除选中的所有行？",function(c){if(c){var b=[];$.each(a,function(d,e){b[d]=e.id});$.ajax({url:ctxAdmin+"/sys/resource/deleteUsers/"+modelId,type:"post",data:{ids:b},traditional:true,dataType:"json",success:function(d){if(d.code===1){$resource_user_datagrid.datagrid("load");eu.showMsg(d.msg)}else{eu.showAlertMsg(d.msg,"error")}}})}})}else{eu.showMsg("您未选择任何操作对象，请选择一行数据！")}};