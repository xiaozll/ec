var modelId;var $resource_role_datagrid;$(function(){$resource_role_datagrid=$("#resource_role_datagrid").datagrid({url:ctxAdmin+"/sys/resource/resourceRoleDatagrid/"+modelId,fit:true,pagination:true,rownumbers:true,fitColumns:false,striped:true,pageSize:20,pageList:[10,20,50,100,1000,99999],remoteSort:false,idField:"id",frozen:true,collapsible:true,frozenColumns:[[{field:"ck",checkbox:true},{field:"name",title:"角色名称",width:200},{field:"code",title:"角色编码",width:200}]],columns:[[{field:"id",title:"主键",hidden:true,sortable:true,align:"right",width:80},{field:"isSystemView",title:"系统角色",width:60},{field:"roleTypeView",title:"权限类型",width:100},{field:"dataScopeView",title:"数据范围",width:200},{field:"organName",title:"所属机构",width:200},{field:"remark",title:"备注",width:260}]],toolbar:[{text:"删除关联",iconCls:"easyui-icon-remove",handler:function(){deleteRoles()}},],onLoadSuccess:function(){$(this).datagrid("clearSelections");$(this).datagrid("unselectAll")},onRowContextMenu:function(b,c,a){b.preventDefault()}}).datagrid("showTooltip")});function deleteRoles(){var a=$resource_role_datagrid.datagrid("getSelections");if(a.length>0){$.messager.confirm("确认提示！","您确定要删除选中的所有行？",function(c){if(c){var b=[];$.each(a,function(d,e){b[d]=e.id});$.ajax({url:ctxAdmin+"/sys/resource/deleteRoles/"+modelId,type:"post",data:{ids:b},traditional:true,dataType:"json",success:function(d){if(d.code===1){$resource_role_datagrid.datagrid("load");eu.showMsg(d.msg)}else{eu.showAlertMsg(d.msg,"error")}}})}})}else{eu.showMsg("您未选择任何操作对象，请选择一行数据！")}};