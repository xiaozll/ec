var modelId=modelId;var modelStatus=modelStatus;var jsessionid=jsessionid;var organs_combotree;$(function(){loadOrgan();loadSex();if($("#image").val()){addImageFile($("#image").val())}uploadifyImage();if(modelId===""){setSortValue();$("input[name=status]:eq(0)").prop("checked","checked");$("#password_div").css("display","block");$("#repassword_div").css("display","block")}else{$("input[name=status][value="+modelStatus+"]").prop("checked","checked");$("#password_div").css("display","none");$("#repassword_div").css("display","none");$("#password_div input").removeAttr("class");$("#repassword_div input").removeAttr("class")}});function loadOrgan(){organs_combotree=$("#defaultOrganId").combotree({url:ctxAdmin+"/sys/organ/tree?dataScope=4&cascade=true",multiple:false,editable:false})}function loadSex(){$("#sex").combobox({url:ctxAdmin+"/sys/user/sexTypeCombobox?selectType=select",editable:false,value:"2"})}function setSortValue(){$.get(ctxAdmin+"/sys/user/maxSort",function(a){if(a.code===1){$("#orderNo").numberspinner("setValue",a.obj+30)}},"json")}function addImageFile(d,a){$("#image").val(d);if(a){$("#image_pre").attr("src",a)}$("#image_pre").show();$("#image_pre").next().show();var c=$("#image_pre").position().left;var b=$("#image_pre").position().top;$("#image_cencel").css({position:"absolute",left:c+75,top:b+10,display:"block"})}function delImageFile(){$("#image_pre").attr("src","");$("#image_pre").hide();$("#image_pre").next().hide();$("#image").val("")}var imageDataMap=new HashMap();function uploadifyImage(){$("#image_uploadify").Huploadify({auto:true,showUploadedPercent:true,showUploadedSize:true,uploader:ctxAdmin+"/sys/user/upload",formData:{},fileObjName:"uploadFile",buttonText:"浏 览",multi:false,fileSizeLimit:fileSizeLimit,removeTimeout:24*60*60*1000,fileTypeExts:"*.gif; *.jpg; *.png; *.bmp",onUploadSuccess:function(file,data,response){data=eval("("+data+")");console.log(file,data,response);if(1===data.code){addImageFile(data.obj["id"],data.obj["url"]);imageDataMap.put(file.index,data.obj)}else{eu.showAlertMsg(data.msg)}},onCancel:function(file){var sf=imageDataMap.get(file.index);delImageFile(sf.id);imageDataMap.remove(file.index)}})}function sync(){$("#code").val($("#loginName").val())};